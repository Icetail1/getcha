<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>视频截图示例</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
<style>
.iframe-container {
    position: relative;
    width: 800px;
    height: 450px;
    overflow: hidden; /* 限制截图范围 */
}

.iframe-player {
    width: 100%;
    height: 100%;
    border: none;
}

.screenshot-button {
    position: absolute;
    bottom: 10px;
    right: 10px;
    padding: 8px 16px;
    background-color: #333;
    color: #fff;
    border: none;
    cursor: pointer;
}
</style>
</head>
<body>
<div class="iframe-container">
    <iframe class="iframe-player" src="https://b23.tv/iH6ZT9N"></iframe>
    <button class="screenshot-button">截图</button>
</div>

<div id="screenshotPreview"></div>

<script>
const screenshotButton = document.querySelector('.screenshot-button');
const screenshotPreview = document.getElementById('screenshotPreview');

screenshotButton.addEventListener('click', () => {
    takeScreenshot();
});

function takeScreenshot() {
    const iframePlayer = document.querySelector('.iframe-player');

    // 使用 html2canvas 截取整个iframe的内容
    html2canvas(iframePlayer).then(canvas => {
        // 将截图显示在页面中
        const screenshotImg = document.createElement('img');
        screenshotImg.src = canvas.toDataURL();
        screenshotImg.alt = '视频截图';
        screenshotPreview.innerHTML = ''; // 清空之前的截图
        screenshotPreview.appendChild(screenshotImg);
    });
}
</script>
</body>
</html>
