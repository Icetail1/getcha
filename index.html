<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>视频播放和截图</title>
</head>
<body>
  <!-- 在这里添加一个 iframe 来嵌入视频 -->
  <iframe id="videoFrame" width="560" height="315" src="https://b23.tv/iH6ZT9N" frameborder="0" allowfullscreen></iframe>
  <br>
  <!-- 添加一个按钮用于暂停视频并触发截图功能 -->
  <button id="screenshotBtn">截图</button>
  <br>
  <!-- 用于显示截图的容器 -->
  <div id="screenshotContainer"></div>

  <!-- 引入 HTML2Canvas 库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>

  <script>
    // 获取 iframe 元素和按钮元素
    const videoFrame = document.getElementById('videoFrame');
    const screenshotBtn = document.getElementById('screenshotBtn');
    const screenshotContainer = document.getElementById('screenshotContainer');

    // 添加按钮点击事件监听器
    screenshotBtn.addEventListener('click', () => {
      // 暂停视频播放
      videoFrame.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');

      // 等待一段时间确保视频已经暂停
      setTimeout(() => {
        // 使用 HTML2Canvas 将 iframe 区域转换为图片
        html2canvas(videoFrame).then(canvas => {
          // 将 canvas 转换为图片 URL
          const imgURL = canvas.toDataURL();

          // 创建一个 img 元素来显示截图
          const img = document.createElement('img');
          img.src = imgURL;
          // 将截图添加到截图容器中
          screenshotContainer.appendChild(img);
        });
      }, 500); // 可根据实际情况调整等待时间
    });
  </script>
</body>
</html>
